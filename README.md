# ООПСЗИ - Практическое задание №1

> Вариант: 18
>
> Выполнил: студент 3 курса, БПЗ1601, Платонов Сергей

* [Цель практикума](#Цель-практикума)
* [Задание 1](#Задание-1)
* [Задание 2](#Задание-2)
* [Задание 3](#Задание-3)
* [Задание 4](#Задание-4)
* [Задание 5](#Задание-5)
* [Задание 6](#Задание-6)
* [Задание 7](#Задание-7)
* [Задание 8](#Задание-8)

## Цель практикума

Овладеть навыками создания однофайловых и многофайловых проектов в интегрированной среде разработки Microsoft Visual Studio и научится создавать линейные программы на языке C с применением арифметических операций.

По номеру Вашего варианта выбрать задачу, решаемую в этой лабораторной работе, и выполнить для нее следующие задания.

## Задание 1

### *Описание task1*

Составить программу, имеющую линейный алгоритм и состоящую из одной функции `void main()`. Программу записать в файл с именем *task1.c*. Скомпилировать, скомпоновать и выполнить.
В функции `main` огранизовать вычисление:

+ для исходных данных, значения которых задать в виде констант в тексте функции `main`
+ для исходных произвольных данных, значения которых пользователь программы должен ввести с клавиатуры в процессе выполнения программы.

Вывод действительных чисел осуществлять **с точностью** до 0.0001.

### *Отчёт для task1*
Исходные данные, заданные в константе:
```c
double x, f;
x = 5;
f = (((x + 2) / sqrt(2 * x)) - (x / (sqrt(2 * x) + 2)) + (2 / (x - sqrt(2 * x)))) * ((sqrt(x) - sqrt(2)) / (x + 2));

printf("x = %.4f\n", x); // 5.0000
printf("f = %.4f\n", f); // 0.2740
```
Исходные произвольные данные, заданные в пользователем с клавиатуры:
```C
scanf("%lf", &x); // 3
f = (((x + 2) / sqrt(2 * x)) - (x / (sqrt(2 * x) + 2)) + (2 / (x - sqrt(2 * x)))) * ((sqrt(x) - sqrt(2)) / (x + 2));

printf("x = %.4f\n", x); // 3.0000
printf("f = %.4f\n", f); // 0.3178
```

## Задание 2

### *Описание task2*

Линейный алгоритм функции из *task1.c* разделить на две процедуры, выделив в одну вычислительные операции этого алгоритма, а в другую все операции ввода-вывода. Каждую процедуру оформить как функцию. Вычислительную часть алгоритма оформить как функцию с параметрами, передаваемыми по значению, и возвращаемым значением. Прототип функции:

```C
double f(double x)
```

Другую часть алгоритма оформить как функцию  `void main()`, вызывающую первую функцию нужное количество раз. Записать тексты функций файл с именем *task2.с* в следующем порядке: функция с параметрами, функция main. Cкомпилировать, скомпоновать и выполнить.

### *Отчёт для task2*

Вычислительные операции:

```c
double f(double x) {
	return ( (((x + 2) / sqrt(2 * x)) - (x / (sqrt(2 * x) + 2)) + (2 / (x - sqrt(2 * x)))) * ((sqrt(x) - sqrt(2)) / (x + 2)) );
}
```

Все операции ввода-вывода:

```c
printf("Введите x:\n");
scanf("%lf", &x); // 3
```

```c
printf("x = %.4f\n", x); // 3.0000
printf("f = %.4f\n", f(x)); // 0.3178
```
## Задание 3

### *Описание task3*

Создать файл *task3.с*, в котором изменить порядок записи текстов функций, созданных в задании 2. Функции записать в следующем порядке: функция main, функция с параметрами, организующая вычисления `double f(double x)`. Внести требуемые дополнения, добиться успешной компиляции, скомпоновать и выполнить.

### *Отчёт для task3*

```c
double f(double x);
```

```c
int main()
{
	setlocale(LC_ALL, "RUS");

	double x;

	printf("Введите x:\n");
	scanf("%lf", &x);

	printf("x = %f\n", x);
	printf("f = %f\n", f(x));

	system("pause");

	return 0;
}
```

```c
double f(double x) {
	return ((((x + 2) / sqrt(2 * x)) - (x / (sqrt(2 * x) + 2)) + (2 / (x - sqrt(2 * x)))) * ((sqrt(x) - sqrt(2)) / (x + 2)));
}
```

## Задание 4

### *Описание task4*

По-прежнему линейный алгоритм функции из задания 1 разделить на две процедуры, выделив в одну вычислительные операции этого алгоритма, а в другую все операции ввода-вывода.

Вычислительную часть алгоритма оформить как функцию без параметров и без возвращаемого значения. Прототип функции `void f(void)`.

Другую часть алгоритма оформить как функцию void main(), вызывающую вычислительную функцию. Обмен данными между функциями организовать через глобальные объекты (`double x, y` – аргументы, `double result` – результат вычисления). Записать тексты функций в файл с именем task4.с в следующем порядке: функция main, затем функция без возвращаемого значения и без параметров. Cкомпилировать, скомпоновать и выполнить.

### *Отчёт для task4*

Вычислительную часть алгоритма оформить как функцию без параметров и без возвращаемого значения. Прототип функции `void f(void)`:

```c
void f(void);
```

Обмен данными между функциями организовать через глобальные объекты (`double x, y` – аргументы, `double result` – результат вычисления):

```c
double x, result;
```

Все операции ввода-вывода, оформить как функцию `void main()`, вызывающую вычислительную функцию:

```c
void main()
{
	setlocale(LC_ALL, "RUS");

	printf("Введите x:\n");
	scanf("%lf", &x); // 3
	f();
	printf("f = %.4f\n", result); // 0.3178

	system("pause");

}
```

## Задание 5

### *Описание task5*

В этом задании необходимо разделить текст файла *task3.с* на два файла. В первый файл с именем *task5_main.c* поместить текст функции main. Скомпилировать только файл *task5_main.c*.

Во второй файл с именем *task5_func.с* поместить текст функции с параметрами`double f(double x)`. Скомпилировать только файл *task5_func.c*. После раздельной компиляции осуществить совместную компоновку. Полученный исполняемый файл выполнить.

### *Отчёт для task5*

Первый файл *task5_main.c*:

```c
#include <stdio.h>
#include <math.h>
#include <locale.h>

double f(double x);

void main()
{
	setlocale(LC_ALL, "RUS");

	double x;

	printf("Введите x:\n");
	scanf("%lf", &x);

	printf("x = %f\n", x);
	printf("f = %f\n", f(x));

	system("pause");
}
```

Второй файл *task5_func.с*:

```c
#include <math.h>

double f(double x) {
	return ((((x + 2) / sqrt(2 * x)) - (x / (sqrt(2 * x) + 2)) + (2 / (x - sqrt(2 * x)))) * ((sqrt(x) - sqrt(2)) / (x + 2)));
}
```

## Задание 6

### *Описание task6*

В этом задании необходимо разделить текст файла *task4.с* на два файла.

В первый файл с именем *task6_main.c* поместить текст функции `main`. Скомпилировать только файл *task6_main.c*.

Во второй файл с именем *task6_func.с* поместить определения глобальных объектов (`double x, y` – аргументы, `double result` – результат вычисления) и текст функции без параметров `void f(void)`. Скомпилировать только файл *task6_func.c*.

После раздельной компиляции осуществить совместную компоновку. Разобраться в проблемах, возникающих при совместной компиляции и компоновки. Полученный исполняемый файл выполнить.

Проанализировать результаты работы и сделать выводы.

### *Отчёт для task6*

Первый файл *task6_main.c*:

```c
#include <stdio.h>
#include <math.h>
#include <locale.h>

void f();

double x, result;

void main()
{
	setlocale(LC_ALL, "RUS");

	printf("Введите x:\n");
	scanf("%lf", &x);
	f();
	printf("f = %f\n", result);

	system("pause");

}
```

Второй файл *task6_func.с*:

```c
#include <math.h>

void f()
{
	result = (((x + 2) / sqrt(2 * x)) - (x / (sqrt(2 * x) + 2)) + (2 / (x - sqrt(2 * x)))) * ((sqrt(x) - sqrt(2)) / (x + 2));
}
```

Вывод: Не получается осуществить компоновку и скомпилировать по отдельности файлы: *task6_main.c* и *task6_func.c*.  При компиляции файла *task6_main.c* появляется ошибка, что функция `f()` предварительно объявлена, но не определена. При компиляции файла *task6_func.c* появляется ошибка, что переменные `x, result` не объявлены, и что в этом файле не найдена главная функция `voud main()`.

## Задание 7

### *Описание task7*

В этом задании необходимо модифицировать тексты файлов из задания 6.

Описание функции и внешних переменных выделить в отдельный заголовочный файл func.h, включить его содержимое в файлы *task7_main.c* и *task7_func.c*. Определение внешних переменных произвести в файле *task7_func.c*.

Скомпилировать по отдельности файлы *task7_main.c* и *task7_func.c*. Произвести компоновку, выполнить полученный исполняемый файл.

### *Отчёт для task7*

Первый файл *task7_main.c*:

```c
#include <stdio.h>
#include <math.h>
#include <locale.h>
#include "../headers/func.h"

void main()
{
	setlocale(LC_ALL, "RUS");

	printf("Введите x:\n");
	scanf("%lf", &x);
	f();
	printf("x = %f\n", x);
	printf("f = %f\n", result);

	system("pause");
}
```

Второй файл *task7_main.c*:

```c
#include <math.h>
#include "../headers/func.h"

double x, result;

void f()
{
	result = (((x + 2) / sqrt(2 * x)) - (x / (sqrt(2 * x) + 2)) + (2 / (x - sqrt(2 * x)))) * ((sqrt(x) - sqrt(2)) / (x + 2));
}
```

Заголовочный файл *func.h*:

```c
void f();
extern double x, result;
```

## Задание 8

### *Описание task8*

Скомпилировать по отдельности файлы из задания 7 *task7_main.c* и *task7_func.c*. Создать статическую библиотеку *task8_lib.lib*, включающую объектный файл *task7_func.obj*.  Выполнить полученный исполняемый файл.

### *Отчёт для task8*

Файлы *task7_main.c* и *task7_func.c* были скомпилированы по отдельности. Статическая библиотека task8_lib.lib, включающая объектный файл *task7_func.obj*:

```cmake
add_library(task8_lib STATIC task7_func.c)
```

Полученная статическая библиотека скомпонована с файлом *task7_main.obj*:

```cmake
add_executable(task8 task7_main.c)
target_link_libraries(task8 task8_lib)
```

Статическая библиотека скомпонована с помощью Cmake (src/CMakeList.txt).
